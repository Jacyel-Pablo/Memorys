// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Memorys_Usuario {
  id                String   @id   @unique  @default(cuid())
  foto_de_perfil    String?
  nome              String   @unique
  email             String   @unique
  senha             String
  ativo             Boolean  @default(false)

  msg               Memorys_Mensagem[]    @relation("id")
  mensagem          Memorys_Mensagem[]    @relation("nome")
  seguidores        Memorys_Seguidores[]
  seguindo          Memorys_Seguindo[]
  foto              Memorys_Foto[]
  videos            Memorys_Video[]
}

model Memorys_Mensagem {
  id                 String   @id   @unique  @default(cuid())
  id_usuario         String
  foto_de_perfil     String?
  nome               String
  data_de_publicacao DateTime @default(now())
  texto_da_mensagem  String

  usuario_id        Memorys_Usuario  @relation("id", fields: [id_usuario], references: [id])
  usuario           Memorys_Usuario  @relation("nome", fields: [nome], references: [nome])
  foto              Memorys_Foto[]
  video             Memorys_Video[]
  comentarios       Memorys_Comentarios[]
  likes             Memorys_Likes[]
  deslikes          Memorys_Deslikes[]
}

model Memorys_Likes {
  id                 String           @id   @unique  @default(cuid())
  id_mensagem        String
  id_usuario         String           @unique

  mensagem           Memorys_Mensagem @relation(fields: [id_mensagem], references: [id])
}

model Memorys_Deslikes {
  id                 String           @id   @unique  @default(cuid())
  id_mensagem        String
  id_usuario         String           @unique

  mensagem           Memorys_Mensagem @relation(fields: [id_mensagem], references: [id])
}

model Memorys_Foto{
  id                 String                  @id   @unique  @default(cuid())
  id_mensagem        String
  fotos              String
  nome_user          String
  
  mensagem           Memorys_Mensagem        @relation(fields: [id_mensagem], references: [id])
  usuario            Memorys_Usuario @relation(fields: [nome_user], references: [nome])
}

model Memorys_Video{
  id                 String                  @id   @unique  @default(cuid())
  id_mensagem        String
  videos             String
  nome_user          String

  mensagem           Memorys_Mensagem        @relation(fields: [id_mensagem], references: [id])
  usuario            Memorys_Usuario @relation(fields: [nome_user], references: [nome])
}

model Memorys_Comentarios {
  id                 String          @id   @unique  @default(cuid())
  id_mensagem        String
  email_do_usuário   String
  texto_da_mensagem  String

  id_msg            Memorys_Mensagem @relation(fields: [id_mensagem], references: [id])
  resposta          Memorys_Resposta_comentario[]
}

model Memorys_Resposta_comentario {
  id                 String             @id   @unique  @default(cuid())
  id_comentario      String
  email_do_usuário   String
  texto_da_mensagem  String

  comentarios        Memorys_Comentarios @relation(fields: [id_comentario], references: [id])
}

model Memorys_Seguidores {
  id                 String   @id   @unique  @default(cuid())
  userid             String
  foto_de_perfil     String?
  nome               String
  data               DateTime @default(now())

  usuario            Memorys_Usuario  @relation(fields: [userid], references: [id])
}

model Memorys_Seguindo {
  id                 String   @id   @unique  @default(cuid())
  userid             String
  foto_de_perfil     String?
  nome               String
  data               DateTime @default(now())

  usuario            Memorys_Usuario  @relation(fields: [userid], references: [id])
}
